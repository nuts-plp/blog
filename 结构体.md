# 结构体与方法

## 结构体

### 结构体的定义、声明和实例化

#### 普通结构体

普通结构体定义格式，可定义全局也可局部

~~~go
type Person struct{ //name为结构体的类型名称，结构体也是一种数据类型，类似java中的类
    na1 string //字段
    na2 int64
    na3 bool
}
~~~

结构体的声明

~~~go
var tim Person
~~~

结构体的实例化

~~~go
//实例化方法一
var tim Person
tim = &Person{"tim",18,true}
//方法二
var tim Person
tim.na1="小米"
tim.na2=18
tim.na3=true
//方法三
var tim = &Person{"tim",18,true} 
//方法四
tim:=&Person{"tim",18,true}
~~~





#### 匿名结构体

匿名结构体定义,可全局也可局部

~~~go
var jack struct{ //匿名结构体相当于一个名为jack的变量
    a string
    b bool
    c int8
}
~~~

结构体的声明与使用

匿名结构体就是一个变量，直接赋值使用

~~~go
jack.a="asdfs"
jack.b=true
jack.c=18
~~~

### 结构体嵌套

~~~go
//结构体嵌套类型一
type animal struct{
    leg int8
}

type cat struct{
    name string
    animal
}
ca := cat{"miaomaio", animal{4}}
	fmt.Println(ca)
//结构体嵌套类型二
type animal struct{
    leg int8
}
type dog struct {
	name string
	*animal  //注意两者的区别
}
do := dog{"wangtwang", &animal{4}}
fmt.Println(do)
~~~



## 方法

概述：方法就是绑定结构体的函数

示例

~~~go
type person struct{
    name string
    age int8
    sex bool
}
//方式一 值接收者
func(per person)speak(){
    fmt.Printf("我是%s,我的年龄是%d,我是%v",per.name,per.age,per.sex)
}
//方式二 指针接收者
func(per person)speak(){
    fmt.Printf("我是%s,我的年龄是%d,我是%v",per.name,per.age,per.sex)
}
~~~

**注意：**在使用值接收者时，使用的是副本，在对象调用方法修改对象的属性时，修改的时副本的值，对对象无影响

在使用指针接收者时，修改对象属性值时修改的是对象自身的值

~~~go
type person struct{
    name string
    age int8
    sex bool
}
//方式一 值接收者
func(per person)speak(){
    per.name="核桃"
    fmt.Printf("我是%s,我的年龄是%d,我是%v",per.name,per.age,per.sex)
}
//方式二 指针接收者
func(per person)speak(){
    per.name="核桃"
    fmt.Printf("我是%s,我的年龄是%d,我是%v",per.name,per.age,per.sex)
}
func main(){
    per1:=person{"坚果"，18，true}//创建一个实例
    per1.speak()//此时方法修改的时副本的值
    fmt.Println(per1)//per1的name字段依然是坚果
    
    per2:=&person{"樱桃"，18，true}//创建一个实例
    per2.speak()//此时修改的时per2自身
    fmt.Println(per2)//per2的字段值为核桃
}
~~~



### 方法的几种类型(以指针接收者为例)

无参无返回值的方法

~~~ go
type person struct{
    name string
    age int   
}
//
func(per *person)speak(){
    fmt.Printf("我是%s,我的年龄是%d\n",per.name,per.age)
}

~~~

有参无返回值的方法

~~~go
type person struct{
    name string
    age int   
}
//
func(per *person)speak(dialog string){
    fmt.Printf("我是%s,我的年龄是%d,我想说的是%s\n",per.name,per.age,dialog)
}

~~~

无参有返回值

~~~go
type person struct{
    name string
    age int   
}
//
func(per *person)speak()*person{
    fmt.Printf("我是%s,我的年龄是%d\n",per.name,per.age)
    return &person{"儿子",1 ,true}
}

~~~

有参有返回值

~~~go
type person struct{
    name string
    age int   
}
//
func(per *person)speak(dialog string)*person{
    fmt.Printf("我是%s,我的年龄是%d\n,我想说的是%s\n",per.name,per.age,dialog)
    return &person{"儿子",1 ,true}&person{"儿子",1 ,true}
}

~~~



